> from django.db import models
> from apps.orders.models import Order
> from utils.models import TimeStampedModel
  
  
> class Payment(TimeStampedModel):
>     """Payment model."""
>     PAYMENT_METHODS = (
>         ('credit_card', 'Credit Card'),
>         ('debit_card', 'Debit Card'),
>         ('paypal', 'PayPal'),
>         ('stripe', 'Stripe'),
>         ('cash_on_delivery', 'Cash on Delivery'),
>     )
      
>     STATUS_CHOICES = (
>         ('pending', 'Pending'),
>         ('processing', 'Processing'),
>         ('completed', 'Completed'),
>         ('failed', 'Failed'),
>         ('refunded', 'Refunded'),
>     )
      
>     order = models.ForeignKey(Order, on_delete=models.CASCADE, related_name='payments')
>     payment_method = models.CharField(max_length=20, choices=PAYMENT_METHODS)
>     transaction_id = models.CharField(max_length=255, unique=True)
>     amount = models.DecimalField(max_digits=10, decimal_places=2)
>     status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='pending')
>     payment_date = models.DateTimeField(auto_now_add=True)
>     idempotency_key = models.CharField(max_length=255, null=True, blank=True, db_index=True)
      # Manual proof upload (for cash on delivery / manual payments)
>     proof_file = models.FileField(upload_to='payment_proofs/', null=True, blank=True)
>     PROOF_STATUS = (
>         ('none', 'None'),
>         ('pending', 'Pending Review'),
>         ('approved', 'Approved'),
>         ('rejected', 'Rejected'),
>     )
>     proof_status = models.CharField(max_length=20, choices=PROOF_STATUS, default='none')
>     proof_note = models.TextField(null=True, blank=True)
>     proof_uploaded_at = models.DateTimeField(null=True, blank=True)
      
>     class Meta:
>         db_table = 'payments'
>         verbose_name = 'Payment'
>         verbose_name_plural = 'Payments'
>         ordering = ['-payment_date']
      
>     def __str__(self):
!         return f"Payment {self.transaction_id} - {self.order.order_number}"
